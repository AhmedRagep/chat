
{% extends 'base.html' %}
{% load static %}
{% block content %}
  <!-- section -->
  <p class="m-3 text-center text-sky-700 text-4xl font-bold">Messages</p>
  <div class="flex justify-center">
    <div class="w-[80vh] h-[90vh] py-4 mb-7 bg-blue-400 mt-15 rounded-xl shadow-xl shadow-sky-400 hover:shadow-blue-700">
      {% for frind in frinds %}
        {% if frind.profile.name == request.user.profile.name %}
        
        {% else %}
        <!-- here -->
        <a href="{% url 'detail' frind.profile.id %}">
        <div class="w-[77vh] h-[60px] flex justify-between items-center m-2 p-2 bg-white rounded-xl">
          <img src="{{frind.profile.img.url}}" class="w-12 h-12 rounded-full" alt="">
          <div>
            <h3 class="text-center text-lg font-bold">{{frind.profile.name|title}}</h3>
            <p class="text-center text-lg">this is body</p>
          </div>
          <div class="w-12 h-12 rounded-full bg-sky-300 flex justify-center items-center shadow-md">
            <p id="num_msg" class="text-center text-3xl font-bold num_msg">0</p>
          </div>
        </div>
        </a>
        {% endif %}
        <!-- end here -->
      {% endfor %}
    </div>
  </div>
  <!--  /section -->

  <script>
    setInterval(getNotification,1000)
    function getNotification(){
      let url = "{% url 'getNotification' %}"
      fetch(url)
      .then(res=>res. json())
      .then(data=>{
        console.log(data)
        let num = document.getElementsByClassName('num_msg');
        for (let i = 0; i < data.length; i++) {
          num[i].innerText = data[i]
          
        }
      })
      .catch(error => console.log(error))
    }
  </script>
{% endblock content %}